[
    {
        "name": "basic",
        "input": "package.json\n|{}\nsrc\n  index.ts\n|export const test = 0;",
        "output": "dist\n  index.cjs\n|'use strict';\n|\n|const test = 0;\n|\n|exports.test = test;\n|\n  index.d.ts\n|export declare const test = 0;\n|\n  index.mjs\n|const test = 0;\n|\n|export { test };\n|\npackage.json\n|{\n|  \"files\": [\n|    \"dist\"\n|  ],\n|  \"scripts\": {\n|    \"prepack\": \"pkgbld prune\"\n|  },\n|  \"types\": \"./dist/index.d.ts\",\n|  \"main\": \"./dist/index.cjs\",\n|  \"module\": \"./dist/index.mjs\",\n|  \"typesVersions\": {\n|    \"*\": {\n|      \".\": [\n|        \"dist/index.d.ts\"\n|      ],\n|      \"*\": [\n|        \"dist/index.d.ts\",\n|        \"dist/*\"\n|      ]\n|    }\n|  },\n|  \"exports\": {\n|    \".\": {\n|      \"types\": \"./dist/index.d.ts\",\n|      \"import\": \"./dist/index.mjs\",\n|      \"require\": \"./dist/index.cjs\",\n|      \"default\": \"./dist/index.cjs\"\n|    },\n|    \"./package.json\": \"./package.json\"\n|  }\n|}\n|\nsrc\n  index.ts\n|export const test = 0;\ntsconfig.json\n|{\n|  \"include\": [\n|    \"src\",\n|    \"types\"\n|  ],\n|  \"compilerOptions\": {\n|    \"lib\": [\n|      \"dom\",\n|      \"esnext\"\n|    ],\n|    \"target\": \"esnext\",\n|    \"module\": \"esnext\",\n|    \"esModuleInterop\": true,\n|    \"allowJs\": true,\n|    \"skipLibCheck\": true,\n|    \"strict\": true,\n|    \"sourceMap\": true,\n|    \"noUncheckedIndexedAccess\": true,\n|    \"declaration\": true,\n|    \"moduleResolution\": \"node\"\n|  }\n|}\n|",
        "stdout": "preparing..\n\npreparing...\nno tsconfig.json or jsconfig.json and --no-ts-config not specified, writing tsconfig...\ndone\nsrc → dist 0 / 1\n✓ index [es, cjs]\nsrc → dist 1 / 1\n✓ src → dist 1 / 1 in XXX\n",
        "stderr": ""
    },
    {
        "name": "umd not allowed without name",
        "input": "package.json\n|{}\nsrc\n  index.ts\n|export const test = 0;",
        "args": "--umd=index",
        "output": "package.json\n|{}\nsrc\n  index.ts\n|export const test = 0;\ntsconfig.json\n|{\n|  \"include\": [\n|    \"src\",\n|    \"types\"\n|  ],\n|  \"compilerOptions\": {\n|    \"lib\": [\n|      \"dom\",\n|      \"esnext\"\n|    ],\n|    \"target\": \"esnext\",\n|    \"module\": \"esnext\",\n|    \"esModuleInterop\": true,\n|    \"allowJs\": true,\n|    \"skipLibCheck\": true,\n|    \"strict\": true,\n|    \"sourceMap\": true,\n|    \"noUncheckedIndexedAccess\": true,\n|    \"declaration\": true,\n|    \"moduleResolution\": \"node\"\n|  }\n|}\n|",
        "exitCode": 255,
        "stdout": "preparing..\n\npreparing...\nno tsconfig.json or jsconfig.json and --no-ts-config not specified, writing tsconfig...\ndone\n✕ expecting name to be a string in package.json\n",
        "stderr": ""
    },
    {
        "name": "umd",
        "input": "package.json\n|{\n|  \"name\": \"test\"\n|}\nsrc\n  index.ts\n|export const test = 0;",
        "args": "--umd=index",
        "stdout": "preparing..\n\npreparing...\nno tsconfig.json or jsconfig.json and --no-ts-config not specified, writing tsconfig...\ndone\nsrc → dist 0 / 1\n✓ index [es, cjs, umd]\nsrc → dist 1 / 1\n✓ src → dist 1 / 1 in XXX\n",
        "stderr": "",
        "output": "dist\n  index.cjs\n|'use strict';\n|\n|const test = 0;\n|\n|exports.test = test;\n|\n  index.d.ts\n|export declare const test = 0;\n|\n  index.mjs\n|const test = 0;\n|\n|export { test };\n|\n  index.umd.js\n|!function(e,o){\"object\"==typeof exports&&\"undefined\"!=typeof module?o(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],o):o((e=\"undefined\"!=typeof globalThis?globalThis:e||self).test={})}(this,(function(e){\"use strict\";e.test=0}));\n|//# sourceMappingURL=index.umd.js.map\n|\n  index.umd.js.map\n|{\"version\":3,\"file\":\"index.umd.js\",\"sources\":[\"../src/index.ts\"],\"sourcesContent\":[\"export const test = 0;\"],\"names\":[],\"mappings\":\"mPAAoB\"}\npackage.json\n|{\n|  \"name\": \"test\",\n|  \"files\": [\n|    \"dist\"\n|  ],\n|  \"scripts\": {\n|    \"prepack\": \"pkgbld prune\"\n|  },\n|  \"types\": \"./dist/index.d.ts\",\n|  \"main\": \"./dist/index.cjs\",\n|  \"module\": \"./dist/index.mjs\",\n|  \"unpkg\": \"./dist/index.umd.js\",\n|  \"typesVersions\": {\n|    \"*\": {\n|      \".\": [\n|        \"dist/index.d.ts\"\n|      ],\n|      \"*\": [\n|        \"dist/index.d.ts\",\n|        \"dist/*\"\n|      ]\n|    }\n|  },\n|  \"exports\": {\n|    \".\": {\n|      \"types\": \"./dist/index.d.ts\",\n|      \"import\": \"./dist/index.mjs\",\n|      \"require\": \"./dist/index.cjs\",\n|      \"default\": \"./dist/index.cjs\"\n|    },\n|    \"./package.json\": \"./package.json\"\n|  }\n|}\n|\nsrc\n  index.ts\n|export const test = 0;\ntsconfig.json\n|{\n|  \"include\": [\n|    \"src\",\n|    \"types\"\n|  ],\n|  \"compilerOptions\": {\n|    \"lib\": [\n|      \"dom\",\n|      \"esnext\"\n|    ],\n|    \"target\": \"esnext\",\n|    \"module\": \"esnext\",\n|    \"esModuleInterop\": true,\n|    \"allowJs\": true,\n|    \"skipLibCheck\": true,\n|    \"strict\": true,\n|    \"sourceMap\": true,\n|    \"noUncheckedIndexedAccess\": true,\n|    \"declaration\": true,\n|    \"moduleResolution\": \"node\"\n|  }\n|}\n|"
    }
]